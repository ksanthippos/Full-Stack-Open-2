(this.webpackJsonpharjoitukset=this.webpackJsonpharjoitukset||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),i=n.n(o),s=n(2),r=n(4),u=n(3),l=n.n(u),f="/api/persons",m=function(){return l.a.get(f).then((function(e){return e.data}))},d=function(e){return l.a.post(f,e).then((function(e){return e.data}))},h=function(e,t){return l.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},N=function(e){var t=e.persons,n=e.setPersons,a=e.setNewName,o=e.setNewNumber,i=e.newName,s=e.handleNameChange,u=e.newNumber,l=e.handleNumberChange,f=e.setNotification,m=e.notificationClass,b=e.setNotificationClass;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var c={name:i,number:u},s=t.find((function(e){return e.name===i}));if(s){if(window.confirm("Replace "+i+"'s number?")){var l=Object(r.a)(Object(r.a)({},s),{},{number:s.number=u});h(s.id,l).then((function(e){n(t.map((function(t){return t.id?t:e})))})).catch((function(e){b("error"),f("Error ".concat(e,": ").concat(i," has already been deleted"),{notificationClass:m}),setTimeout((function(){f(null)}),5e3)})),b("update"),f("Updated ".concat(i," number to ").concat(u),{notificationClass:m}),setTimeout((function(){f(null)}),5e3),n(t.filter((function(e){return e.id!==s.id}))),a(""),o("")}}else d(c).then((function(e){n(t.concat(e)),a(""),o("")})).catch((function(e){b("error"),f("".concat(e.response.data.error),{notificationClass:m}),setTimeout((function(){f(null)}),5e3)})),b("success"),f("Added ".concat(i),{notificationClass:m}),setTimeout((function(){f(null)}),5e3)}},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:i,onChange:s})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:u,onChange:l})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},p=function(e){var t=e.setSearchNull,n=e.persons,o=e.setSearchResults,i=e.searchTerm,s=e.handleFindName;return Object(a.useEffect)((function(){t(""===i)})),Object(a.useEffect)((function(){var e=n.filter((function(e){return e.name.toLowerCase().includes(i)}));o(e)}),[n,o,i]),c.a.createElement("form",null,c.a.createElement("div",null,"Filter by name:",c.a.createElement("input",{placeholder:"Search:",value:i,onChange:s})))},E=function(e){var t=e.person,n=e.setPersons,a=e.setNotification,o=e.notificationClass,i=e.setNotificationClass;return c.a.createElement("div",null,c.a.createElement("li",{className:"person"},t.name," : ",t.number,c.a.createElement("button",{onClick:function(){window.confirm("Delete "+t.name+" from contacts?")&&(b(t.id).then((function(){m().then((function(e){n(e)}))})),i("update"),a("Deleted ".concat(t.name," from contacts"),{notificationClass:o}),setTimeout((function(){a(null)}),2e3))}},"delete")))},C=function(e){var t=e.searchNull,n=e.persons,a=e.setPersons,o=e.namesToShow,i=e.setNotification,s=e.notificationClass,r=e.setNotificationClass;return t?c.a.createElement("div",null,c.a.createElement("ul",null,n.map((function(e,t){return c.a.createElement(E,{key:t,person:e,persons:n,setPersons:a,setNotification:i,notificationClass:s,setNotificationClass:r})})))):c.a.createElement("div",null,c.a.createElement("ul",null,o.map((function(e,t){return c.a.createElement(E,{key:t,person:e,persons:n,setPersons:a,setNotification:i,notificationClass:s,setNotificationClass:r})}))))},v=function(e){var t=e.message,n=e.notificationClass;return null===t?null:c.a.createElement("div",{className:n},t)},j=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(""),r=Object(s.a)(i,2),u=r[0],l=r[1],f=Object(a.useState)(""),d=Object(s.a)(f,2),h=d[0],b=d[1],E=Object(a.useState)(""),j=Object(s.a)(E,2),O=j[0],w=j[1],S=Object(a.useState)([]),g=Object(s.a)(S,2),T=g[0],k=g[1],P=Object(a.useState)(!0),y=Object(s.a)(P,2),D=y[0],F=y[1],R=Object(a.useState)("success"),A=Object(s.a)(R,2),J=A[0],x=A[1],B=Object(a.useState)(null,J),I=Object(s.a)(B,2),L=I[0],U=I[1];Object(a.useEffect)((function(){m().then((function(e){o(e)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(v,{message:L,notificationClass:J}),c.a.createElement(p,{setSearchNull:F,persons:n,setSearchResults:k,searchTerm:O,handleFindName:function(e){w(e.target.value)}}),c.a.createElement("h2",null,"Add new"),c.a.createElement(N,{namesToShow:T,persons:n,setPersons:o,setNewName:l,newName:u,handleNameChange:function(e){l(e.target.value)},newNumber:h,setNewNumber:b,handleNumberChange:function(e){b(e.target.value)},setNotification:U,notificationClass:J,setNotificationClass:x}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(C,{searchNull:D,persons:n,setPersons:o,namesToShow:T,setNotification:U,notificationClass:J,setNotificationClass:x}),"...")};n(37);i.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e7244dc7.chunk.js.map